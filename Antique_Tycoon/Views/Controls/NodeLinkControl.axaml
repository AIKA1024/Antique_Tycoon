<Styles xmlns="https://github.com/avaloniaui"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:controls="using:Antique_Tycoon.Views.Controls"
        xmlns:c="using:Antique_Tycoon.Views.Controls"
        xmlns:cv="clr-namespace:Antique_Tycoon.Converters"
        xmlns:node="clr-namespace:Antique_Tycoon.Models.Node">
  <Design.PreviewWith>
    <controls:NodeLinkControl />
  </Design.PreviewWith>

  <Style Selector="controls|NodeLinkControl" x:DataType="node:NodeModel">
    <Setter Property="Padding" Value="16" />
    <Setter Property="BorderThickness" Value="2" />
    <Setter Property="CornerRadius" Value="4" />
    <Setter Property="Background" Value="#ECCC68" />
    <Setter Property="Foreground" Value="Black" />
    <Setter Property="NodeModel" Value="{Binding}"/>
    <Setter Property="LineCanvas" Value="{Binding RelativeSource={RelativeSource AncestorType=Canvas}}"/>
    <Setter Property="Template">
      <ControlTemplate>
        <Panel
          TextElement.Foreground="{TemplateBinding Foreground}"
          Height="{Binding Height}"
          Width="{Binding Width}">
          <Border
            ClipToBounds="True"
            Background="{Binding Background,Converter={x:Static cv:SolidBrushAndColorConverter.ToSolidBrush}}"
            Padding="{TemplateBinding Padding}"
            CornerRadius="{TemplateBinding CornerRadius}"
            BorderThickness="{TemplateBinding BorderThickness}"
            BorderBrush="{TemplateBinding BorderBrush}">
            <ContentPresenter Content="{TemplateBinding Content}"
                              ContentTemplate="{TemplateBinding ContentTemplate}"/>
          </Border>

          <c:Connector
            DataContext="{Binding ConnectorModels[0]}"
            Uuid="{Binding Uuid}"
            Anchor="{Binding Anchor,Mode=TwoWay}"
            ActiveConnections="{Binding ActiveConnections}"
            PassiveConnections="{Binding PassiveConnections}"
            LineCanvas="{Binding LineCanvas,RelativeSource={RelativeSource Mode=TemplatedParent}}"
            HorizontalAlignment="Left" VerticalAlignment="Center" />
          <c:Connector
            DataContext="{Binding ConnectorModels[1]}"
            Uuid="{Binding Uuid}"
            Anchor="{Binding Anchor,Mode=TwoWay}"
            ActiveConnections="{Binding ActiveConnections}"
            PassiveConnections="{Binding PassiveConnections}"
            LineCanvas="{Binding LineCanvas,RelativeSource={RelativeSource Mode=TemplatedParent}}"
            HorizontalAlignment="Center" VerticalAlignment="Top" />
          <c:Connector
            DataContext="{Binding ConnectorModels[2]}"
            Uuid="{Binding Uuid}"
            Anchor="{Binding Anchor,Mode=TwoWay}"
            ActiveConnections="{Binding ActiveConnections}"
            PassiveConnections="{Binding PassiveConnections}"
            LineCanvas="{Binding LineCanvas,RelativeSource={RelativeSource Mode=TemplatedParent}}"
            HorizontalAlignment="Right" VerticalAlignment="Center" />
          <c:Connector
            DataContext="{Binding ConnectorModels[3]}"
            Uuid="{Binding Uuid}"
            Anchor="{Binding Anchor,Mode=TwoWay}"
            ActiveConnections="{Binding ActiveConnections}"
            PassiveConnections="{Binding PassiveConnections}"
            LineCanvas="{Binding LineCanvas,RelativeSource={RelativeSource Mode=TemplatedParent}}"
            HorizontalAlignment="Center" VerticalAlignment="Bottom" />
        </Panel>
      </ControlTemplate>
    </Setter>
  </Style>
</Styles>